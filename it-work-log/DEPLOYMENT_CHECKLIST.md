# 部署檢查清單

## 部署前檢查

### 伺服器環境
- [ ] Linux/Windows Server 已準備
- [ ] Node.js 14+ 已安裝
- [ ] npm 6+ 已安裝  
- [ ] 防火牆已開放 3008 端口
- [ ] 足夠的磁碟空間（建議 1GB+）
- [ ] 足夠的記憶體（建議 1GB+）

### 部署檔案
- [ ] 專案檔案已複製到伺服器
- [ ] 資料夾權限已設定正確
- [ ] deploy.sh 有執行權限
- [ ] .env.production 已配置

## 部署步驟

### 1. 基本部署
- [ ] 執行 `./deploy.sh production`
- [ ] 檢查部署過程無錯誤
- [ ] 服務已正常啟動

### 2. PM2 設定（推薦）
- [ ] PM2 已全域安裝: `npm install -g pm2`
- [ ] PM2 開機自啟設定: `pm2 startup`
- [ ] 應用程式已透過 PM2 啟動
- [ ] PM2 設定已保存: `pm2 save`

### 3. 安全配置
- [ ] 修改 JWT_SECRET 為強密碼
- [ ] 修改 SESSION_SECRET 為強密碼
- [ ] 設定 ALLOWED_ORIGINS 為公司網域
- [ ] 檢查檔案權限（資料庫檔案 600 權限）

## 部署後測試

### 基本功能測試
- [ ] 瀏覽器可正常訪問 `http://server-ip:3008`
- [ ] 登入功能正常（admin/admin123）
- [ ] 可以新增工作日誌
- [ ] 可以查看工作日誌列表
- [ ] 可以編輯和刪除日誌

### API 測試
```bash
# 測試登入 API
curl -X POST http://server-ip:3008/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'

# 應該返回 JWT token
```

### 效能測試
- [ ] 頁面載入速度正常（<3秒）
- [ ] 多人同時使用正常
- [ ] 記憶體使用合理

## 網路配置

### 內部網路訪問
- [ ] 內部網路可正常訪問
- [ ] DNS 設定（如有需要）
- [ ] 負載平衡器設定（如有需要）

### Nginx 反向代理（可選）
- [ ] Nginx 已安裝
- [ ] 配置檔案已設定
- [ ] Nginx 服務已重新載入
- [ ] 通過域名可正常訪問

## 監控與維護

### 日誌檢查
- [ ] 應用程式日誌正常
- [ ] 錯誤日誌沒有異常
- [ ] 日誌輪轉設定（可選）

### 備份設定
- [ ] 備份目錄已建立
- [ ] 手動備份測試: `npm run backup`
- [ ] 定期備份計劃（建議每日）

### 監控設定
- [ ] PM2 監控: `pm2 monit`
- [ ] 伺服器監控（CPU、記憶體、磁碟）
- [ ] 服務健康檢查

## 使用者設定

### 初始設定
- [ ] 修改預設管理員密碼
- [ ] 建立其他使用者帳號
- [ ] 設定使用者權限
- [ ] 測試不同權限功能

### 使用者培訓
- [ ] 使用手冊已提供
- [ ] 基本操作培訓完成
- [ ] 故障排除聯絡方式已告知

## 故障排除

### 常見問題檢查
- [ ] 端口 3008 沒有被其他程式佔用
- [ ] 資料庫檔案權限正確
- [ ] Node.js 版本符合需求
- [ ] 所有依賴套件已正確安裝

### 緊急應變
- [ ] 回滾計劃已準備
- [ ] 備份檔案可正常回復
- [ ] 緊急聯絡人已設定
- [ ] 故障排除文件已準備

## 文件檢查
- [ ] DEPLOYMENT.md 已閱讀
- [ ] README.md 已更新
- [ ] 管理員手冊已準備
- [ ] 使用者手冊已準備

## 完成確認

### 系統管理員確認
- [ ] 部署流程已完成
- [ ] 所有測試項目已通過
- [ ] 文件已齊全
- [ ] 團隊已完成交接

### 使用者驗收
- [ ] 功能符合需求
- [ ] 效能符合預期
- [ ] 使用介面友善
- [ ] 驗收測試通過

---

**部署完成日期**: _______________  
**部署負責人**: _______________  
**驗收負責人**: _______________  
**正式上線日期**: _______________